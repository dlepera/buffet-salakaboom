(function($){$.fn._dlgaleria=function(opcoes){var $this=$(this);var padrao={minis:false,naveg:false,indicador:false,fotos:[],transicao:{nome:"fade",tempo:"0.5s"},aparencia:{tema:"galeria-2",estilo:"galeria"},autotroca:{ativar:false,tempo:10000}};opcoes=$.extend({},padrao,opcoes);if(typeof(CarregarCSS)==="function"){CarregarCSS(dir_raiz+"/aplicacao/js/dl-galeria/css/"+opcoes.aparencia.tema+"/"+opcoes.aparencia.estilo+".css");CarregarCSS(dir_raiz+"/aplicacao/js/dl-galeria/css/"+opcoes.aparencia.tema+"/animacoes.css")}$this.addClass(opcoes.aparencia.tema);$this.addClass(opcoes.aparencia.estilo);var qtde_f=opcoes.fotos.length;if(qtde_f<1){$this.html("Nenhuma foto encontrada");return $this}for(var i=0;i<qtde_f;i++){var foto=opcoes.fotos[i];var $figure=$(document.createElement("figure")).attr({onclick:foto.ir!==undefined?"window.location = '"+foto.ir+"';":foto.js!==undefined?foto.js:""}).appendTo($this);$(document.createElement("img")).attr({src:foto.src}).appendTo($figure);if((foto.titulo!==undefined&&foto.titulo!="")||(foto.descr!==undefined&&foto.descr!="")){var $figcaption=$(document.createElement("figcaption")).appendTo($figure);if(foto.titulo!==undefined&&foto.titulo!=""){$(document.createElement("h2")).html(foto.titulo).appendTo($figcaption)}if(foto.descr!==undefined&&foto.descr!=""){$(document.createElement("p")).html(foto.descr).appendTo($figcaption)}}}if(opcoes.minis){var $minis=$(document.createElement("div")).addClass("dl-galeria-minis").appendTo($this);for(var i=0;i<qtde_f;i++){var foto=opcoes.fotos[i];var $figure=$(document.createElement("figure")).on("click",function(){$this.find("> figure")._dltrocaritem($(this).index(),opcoes.transicao)}).appendTo($minis);$(document.createElement("img")).attr({src:foto.src}).appendTo($figure)}}if(opcoes.naveg){var $naveg=$(document.createElement("nav")).addClass("dl-galeria-naveg").appendTo($this);$(document.createElement("a")).attr({href:"javascript:;"}).html("|<").on("click",function(){$this.find("> figure")._dltrocaritem(0,opcoes.transicao)}).appendTo($naveg);$(document.createElement("a")).attr({href:"javascript:;"}).on("click",function(){$this.find("> figure")._dltrocaritem($this.find("> figure:visible").index()-1,opcoes.transicao)}).html("<").appendTo($naveg);$(document.createElement("a")).attr({href:"javascript:;"}).on("click",function(){$this.find("> figure")._dltrocaritem($this.find("> figure:visible").index()+1,opcoes.transicao)}).html(">").appendTo($naveg);$(document.createElement("a")).attr({href:"javascript:;"}).on("click",function(){$this.find("> figure")._dltrocaritem(qtde_f,opcoes.transicao)}).html(">|").appendTo($naveg)}if(opcoes.indicador){var $indic=$(document.createElement("div")).addClass("dl-galeria-indicador").appendTo($this);for(var i=0;i<qtde_f;i++){$(document.createElement("a")).text(i+1).attr({href:"javascript:;"}).bind("click",function(){var $_this=$(this);$this.find("> figure")._dltrocaritem($_this.index(),opcoes.transicao)}).appendTo($indic)}}if(opcoes.autotroca.ativar){window.setInterval(function(){$this.find("> figure")._dltrocaritem($this.find("> figure:visible").index()+1,opcoes.transicao,opcoes.loop)},opcoes.autotroca.tempo)}return $this};$.fn._dltrocaritem=function(item,transicao,loop){var $this=$(this);if(loop){item=item<0?$this.length-1:item>($this.length-1)?0:item}else{item=item<0?0:item>($this.length-1)?$this.length-1:item}$this.filter(":visible").fadeOut("fast",function(){$this.filter(":eq("+item+")").css({display:"block",animation:transicao.nome+" "+transicao.tempo+" forwards"});$this.parents("div").find(".dl-galeria-indicador > a").removeClass("atual").filter(":eq("+item+")").addClass("atual")});return $this}})(jQuery);