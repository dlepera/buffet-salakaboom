var dl_interv;(function($){$.fn._dltrocaitem=function(item,loop){var $this=$(this);if(loop){item=(item<0)?$this.length-1:(item>($this.length-1))?0:item}else{item=(item<0)?0:(item>($this.length-1))?$this.length-1:item}$this.filter(":visible").fadeOut("fast",function(){var $novo=$this.filter(":eq("+item+")");var title=$novo.attr("title");var $galeria=$novo.parents(".dl-galeria-album");var $titulo=$galeria.find(".dl-galeria-titulo");var $descr=$galeria.find(".dl-galeria-descr");var $indic=$galeria.find(".dl-galeria-indicador");if($titulo.length>0){var expreg=/^(Título:)\s+(.+)/i;if(expreg.test(title)){var titulo=expreg.exec(title);$titulo.text(titulo[2])}}if($descr.length>0){var expreg=/(Descrição:)\s+(.+)/i;if(expreg.test(title)){var descr=expreg.exec(title);$descr.text(descr[2])}}if($indic.length>0){var $a=$indic.find("a");$a.removeClass("atual");$a.filter(":eq("+item+")").addClass("atual")}$novo.fadeIn("fast")});return $this};$.fn._dlgaleria=function(opcoes){var $_this=$(this);var padroes={titulo:false,descr:false,minis:false,naveg:false,loop:false,rotacao:false,indicador:false,teclaesc:false,aparencia:{tema:"dl-galeria-1.0",estilo:"dl-galeria-1.0"}};opcoes=$.extend({},padroes,opcoes);if(opcoes.aparencia!==null){if(typeof(CarregarCSS)==="function"){CarregarCSS(dir_raiz+"/aplicacao/js/dl-galeria/css/"+opcoes.aparencia.tema+"/"+opcoes.aparencia.estilo+".css")}$_this.addClass(opcoes.aparencia.tema)}$_this.each(function(){var $this=$(this);if(opcoes.teclaesc){$(window).bind("keyup",function(){var kcode=event.keyCode;if(kcode==27){$this.fadeOut("fast",function(){$(this).remove()})}})}$this.addClass("dl-galeria-album").addClass(opcoes.aparencia.estilo.replace(".","_"));var position=$this.css("position");if(position==""||position=="static"||position==undefined){$this.css({position:"relative"})}var $citens=$this.find(".dl-galeria-itens");var $itens=$citens.find("> .dl-galeria-item");$itens.not(":first-child").css({display:"none"});if(opcoes.titulo||opcoes.descr){if(opcoes.titulo){$(document.createElement("div")).addClass("dl-galeria-titulo").insertBefore($citens)}if(opcoes.descr){$(document.createElement("div")).addClass("dl-galeria-descr").insertBefore($citens)}}$itens._dltrocaitem(0,opcoes.loop);if(opcoes.naveg){var $naveg=$(document.createElement("div")).addClass("dl-galeria-navegacao").insertBefore($citens);$(document.createElement("a")).text("|<").attr({title:"Primeiro",href:"javascript:;"}).click(function(){$itens._dltrocaitem(0,opcoes.loop)}).appendTo($naveg);$(document.createElement("a")).text("<").attr({title:"Anterior",href:"javascript:;"}).click(function(){var atual=$itens.filter(":visible").index();return $itens._dltrocaitem(atual-1,opcoes.loop)}).appendTo($naveg);$(document.createElement("a")).text(">").attr({title:"Próximo",href:"javascript:;"}).click(function(){var atual=$itens.filter(":visible").index();return $itens._dltrocaitem(atual+1,opcoes.loop)}).appendTo($naveg);$(document.createElement("a")).text(">|").attr({title:"Último",href:"javascript:;"}).click(function(){return $itens._dltrocaitem($itens.length-1,opcoes.loop)}).appendTo($naveg)}if(opcoes.minis){var $minis=$(document.createElement("div")).addClass("dl-galeria-minis").insertBefore($citens);$itens.each(function(){return $(this).clone().css({display:"block"}).click(function(){$itens._dltrocaitem($(this).index(),opcoes.loop)}).appendTo($minis)})}if(opcoes.indicador){$indic=$(document.createElement("div")).addClass("dl-galeria-indicador").appendTo($this);qtde_itens=$itens.length;for(i=0;i<qtde_itens;i++){$(document.createElement("a")).text(i+1).attr({href:"javascript:;"}).bind("click",function(){var index=$(this).index();$itens._dltrocaitem(index,opcoes.loop)}).appendTo($indic)}}});if(opcoes.rotacao){dl_interv=window.setInterval(function(){var $itens=$(".dl-galeria-itens > .dl-galeria-item");var atual=$itens.filter(":visible").index();return $itens._dltrocaitem(atual+1,opcoes.loop)},7000)}return $_this}})(jQuery);